<h2>gmap</h2>
<div id='map'></div>

<style>
#map {
  height: 600px;
  width: 1200px;
}
</style>

<script>
let map

function initMap(){
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 39.652832, lng: 139.839478},
    zoom: 5,
  });

  <% @posts.each do |post| %>
    marker_<%= post.id %> = new google.maps.Marker({ // ピンの追加
      position: {lat: <%= post.latitude %>, lng: <%= post.longitude %>}, // ピンを立てる位置を指定
      map: map // ピンを立てる地図を指定
    });
    <% end %>
    
}

    // marker_<#%= post.id %>.addListener('click', function() { // ピンをクリックしたとき
 
        
        
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['API_KEY']%>&callback=initMap" async defer></script>